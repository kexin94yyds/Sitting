# 久坐提醒应用 - Instant DB 配置指南

## 🎯 你的项目信息

- **App ID**: `45324b65-18cd-4cbc-bec7-74d777663e74`
- **项目名称**: "Sitting for long periods of time"

## 📋 配置步骤

### 1. 获取 API Key

1. 在 Instant DB Dashboard 中，点击左侧菜单的 **"Admin"**
2. 找到 **"API Keys"** 部分
3. 复制 **Public API Key**
4. 替换 `instantdb/index.html` 中的 `YOUR_INSTANT_DB_API_KEY`

### 2. 配置数据库 Schema

1. 在 Dashboard 左侧菜单点击 **"Schema"**
2. 将 `schema.js` 文件中的内容复制到 Schema 编辑器
3. 点击 **"Save"** 保存 schema

### 3. 设置权限

在 **"Permissions"** 页面，设置以下权限：

```javascript
// 允许所有用户读写提醒数据
reminders: {
  read: true,
  write: true
}

// 允许所有用户读写推送订阅
push_subscriptions: {
  read: true,
  write: true
}

// 允许所有用户读写用户设置
user_settings: {
  read: true,
  write: true
}

// 允许所有用户读写提醒历史
reminder_history: {
  read: true,
  write: true
}
```

## 🚀 快速测试

### 本地测试

```bash
cd /Users/apple/久坐通知/instantdb
npx serve . -p 3000
```

访问：`http://localhost:3000`

### 部署到生产环境

#### Vercel（推荐）

1. 安装 Vercel CLI：
```bash
npm i -g vercel
```

2. 部署：
```bash
cd instantdb
vercel --prod
```

#### Netlify

1. 将 `instantdb` 文件夹拖拽到 [Netlify Drop](https://app.netlify.com/drop)

## 📱 iPhone 使用

1. 用 Safari 打开应用网址
2. 点击分享 → "添加到主屏幕"
3. 在主屏幕打开应用
4. 允许通知权限
5. 设置提醒间隔并开始使用

## 🔧 生成 VAPID 密钥

```bash
npx web-push generate-vapid-keys
```

将生成的公钥替换到代码中的 `YOUR_VAPID_PUBLIC_KEY`

## ✅ 测试清单

- [ ] API Key 已配置
- [ ] Schema 已保存
- [ ] 权限已设置
- [ ] VAPID 密钥已生成
- [ ] 本地测试通过
- [ ] 通知权限已授予
- [ ] iPhone PWA 安装成功

## 🆘 常见问题

### Q: 数据库连接失败？
A: 检查 App ID 和 API Key 是否正确

### Q: 推送通知不工作？
A: 确认已生成并配置 VAPID 密钥

### Q: iPhone 收不到后台推送？
A: 确保通过"添加到主屏幕"安装，且 iOS ≥ 16.4

## 📞 需要帮助？

如果遇到问题，可以：
1. 查看浏览器控制台错误信息
2. 检查 Instant DB Dashboard 中的日志
3. 确认所有配置步骤都已完成
